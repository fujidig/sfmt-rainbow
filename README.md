# sfmt-rainbow

## これは何？

第7世代のポケモンの時計の針から初期seedを求めるプログラムです。
これを実現するのはおだんぽよさんのWeb API (https://odanpoyo.github.io/2018/03/23/rng-api2/ )を使うのが一般的ですが、このプログラムはそれに依存しません。

レインボーテーブル (https://ja.wikipedia.org/wiki/%E3%83%AC%E3%82%A4%E3%83%B3%E3%83%9C%E3%83%BC%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB )の技術を利用しています。
各step∈{417, 477, 1012, 1132}ごとに約200MBのテーブルを使います。
仕組み上100%初期seedが見つかるわけではないですが、95%ぐらいは成功するのではないかと思います (未検証).
検索は1分(並列化したもの) or 5分(no-並列化)程度で終わります。

おだんぽよさんのAPIを使えばいいので実用性はあまりないです。

## 使い方

テーブル生成プログラムはMetalを利用しているため、Macでのみビルドできます。

```
$ source compile.sh
```

でコンパイル。

```
$ ./create_rainbow 417
```

で417.binというテーブルを作成します (M1 Macだと8時間弱かかりました)。

```
$ ./sort-rainbow 417
```

で先程生成した417.binの内容をソートし417.sorted.binを出力します。

```
$ ./search_rainbow_metal 417
```

で検索ができます (標準入力から針の値をスペース区切りで入力を求められます)


## アップロードしたテーブルを使う方法

執筆中...

## 今後の改良点

バイナリエディタで417.sorted.binを開くとチェインの最後が同じものが結構複数登録されている。
テーブルの各チェインの最後のseedが同じものはテーブルに含めないようにした方が検索のヒット率の意味でも検索の速度の意味でも良いかも。
